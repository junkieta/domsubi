<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>クリックカウンターのサンプル - domsubi</title>
        <style>
            pre {
                padding: 1em;
                font-family: monospace;
                line-height: 1.8;
                background-color: #333;
                color: #FFF;
            }
            pre var {
                font-style: normal;
                font-weight: bold;
                color: #88FF88;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>クリックカウンターのサンプル</h1>
        </header>
        <script id="click-counter-sample" type="module">
            import {StreamSink} from "./sodiumjs.js";
            import {jshtml} from "./domsubi.js";

            const targetNode = document.getElementById('click-counter-sample');

            const sClicked = new StreamSink();
            const countClicked = sClicked.accum(0, (u,n) => n + 1);
            const varColor = countClicked.map((n) => n % 5 ? 'black' : 'red');
            const countClickedVar = {
                var: countClicked,
                $: {
                    style: {
                        color: varColor,
                        fontSize: 'x-large'
                    }
                }
            };
            const contents = new jshtml([
                { button: 'Click me!!', $: { onclick: sClicked } },
                { p: ['You clicked a button ', countClickedVar, ' times.'] }
            ]);
            contents.mount(targetNode);
        </script>
    </body>
</html>
